(this["webpackJsonpmelp-client-app"]=this["webpackJsonpmelp-client-app"]||[]).push([[0],{35:function(e,t,a){},40:function(e,t,a){e.exports=a(91)},45:function(e,t,a){},63:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),c=a.n(l),s=(a(45),a(2)),i=a(3),o=a(5),u=a(4),h=a(6),m=a(12),d=a(19),v=a.n(d),p=(a(63),a(15)),g=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"nav"},r.a.createElement("h1",null,r.a.createElement(p.b,{to:"/"},"MELP")))}}]),t}(r.a.Component),E=(a(71),function(e){function t(e){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.data;return r.a.createElement("div",null,r.a.createElement("div",{className:"restaurantListDiv"},e.map((function(e){return r.a.createElement("div",{key:e.id,className:"restaurantDiv"},r.a.createElement("div",{className:"nameRatingDiv"},r.a.createElement("div",{className:"nameDiv"},r.a.createElement("h3",null,e.name.toUpperCase())),r.a.createElement("div",{className:"ratingDiv"},r.a.createElement("p",null,"Rating: ",e.rating," / 4"))),r.a.createElement("div",{className:"imageAddressDiv"},r.a.createElement("div",{className:"imageDiv"},r.a.createElement("img",{src:"https://res.cloudinary.com/dipt6v4xr/image/upload/v1570469514/restaurant-chocolat.jpg",alt:"Restaurant "})),r.a.createElement("div",{className:"fbDiv"},r.a.createElement("div",{className:"fb-like","data-href":"https://johnnyqnnz.github.io/melp-client-app/","data-width":"","data-layout":"button_count","data-action":"like","data-size":"small","data-show-faces":"true","data-share":"true"})),r.a.createElement("div",{className:"addressDiv"},r.a.createElement("h4",null,"Address:"),r.a.createElement("p",null,e.address.street),r.a.createElement("p",null,e.address.city),r.a.createElement("p",null,e.address.state))),r.a.createElement("div",{className:"contactIdDiv"},r.a.createElement("div",{className:"contactDiv"},r.a.createElement("h4",null,"Contact:"),r.a.createElement("p",null,r.a.createElement("a",{href:e.contact.site,target:"_blank"},e.contact.site)),r.a.createElement("p",null,e.contact.email),r.a.createElement("p",null,e.contact.phone))))}))))}}]),t}(r.a.Component)),b=(a(72),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value;console.log(t),this.props.onChange(t)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",{className:"sortSelectH2"},"Restaurant search"),r.a.createElement("div",{className:"sortSelect"},r.a.createElement("p",null,"Order by: "),r.a.createElement("select",{onChange:this.handleChange},r.a.createElement("option",null,"ABC..."),r.a.createElement("option",null,"Rating")),r.a.createElement("div",null,r.a.createElement(p.b,{to:"/location"},r.a.createElement("button",null,"Search by location")))))}}]),t}(r.a.Component)),f=a(20),y=a.n(f),j=(a(35),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={data:[],orderBy:"ABC..."},v.a.get("./data/data.json").then((function(e){console.log(e.data),a.setState({data:e.data}),console.log(a.state)})),a.handleSortChange=a.handleSortChange.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleSortChange",value:function(e){console.log("Selected value: "+e),this.setState({orderBy:e}),console.log(this.state),"ABC..."===e?this.sortAlphabetically(this.state.data):this.sortByRating(this.state.data)}},{key:"sortAlphabetically",value:function(e){return e.sort((function(e,t){var a=e.name.toUpperCase(),n=t.name.toUpperCase();return a<n?-1:a>n?1:0}))}},{key:"sortByRating",value:function(e){return e.sort((function(e,t){var a=e.rating,n=t.rating;return a>n?-1:a<n?1:0}))}},{key:"render",value:function(){var e=this.state.data;return r.a.createElement("div",{className:"homeDiv"},r.a.createElement(g,null),r.a.createElement(b,{onChange:this.handleSortChange}),r.a.createElement(E,{data:e}),r.a.createElement(y.a,null))}}]),t}(r.a.Component)),O=a(25),k=a.n(O),C=a(39),R=(a(76),function(e){function t(e){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.data;return r.a.createElement("div",{className:"resultsListDiv"},e.map((function(e){return r.a.createElement("div",{key:e.id,className:"resultsListItemDiv"},r.a.createElement("h3",null,e.name),r.a.createElement("p",null,"Rating: ",e.rating),r.a.createElement("p",null,"Distance from marker: ",e.distanceToUser.toFixed(3)," Km"),r.a.createElement("div",{className:"addressDiv"},r.a.createElement("h4",null,"Location: "),r.a.createElement("p",null,"Street: ",e.address.street),r.a.createElement("p",null,"State: ",e.address.state),r.a.createElement("p",null,"City: ",e.address.city)),r.a.createElement("div",{className:"contactDiv"},r.a.createElement("h4",null,"Contact: "),r.a.createElement("p",null,"Email: ",e.contact.email),r.a.createElement("p",null,"Phone: ",e.contact.phone),r.a.createElement("p",null,"Site: ",e.contact.site)))})))}}]),t}(r.a.Component)),N=(a(77),function(e){function t(e){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"calculateAverage",value:function(e){return e.reduce((function(e,t){return e+t}),0)/e.length}},{key:"calculateStdDev",value:function(e){var t=this.calculateAverage(e),a=e.map((function(e){var a=e-t;return a*a})),n=this.calculateAverage(a),r=Math.sqrt(n);return console.log(r),r}},{key:"render",value:function(){for(var e=this.props.data,t=[],a=0;a<e.length;a++)t.push(e[a].rating);var n=this.calculateAverage(t),l=this.calculateStdDev(t);return r.a.createElement("div",{className:"resultsDetailsDiv"},r.a.createElement("p",null,"Restaurants found: ",e.length),r.a.createElement("p",null,"Average rating: ",n.toFixed(2)),r.a.createElement("p",null,"Rating standard deviation: ",l.toFixed(2)))}}]),t}(r.a.Component)),S=(a(78),a(18)),D=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).addMarker=function(e,t){a.setState({userLocation:{lat:e.lat(),lng:e.lng()}}),console.log(a.state.userLocation),t.panTo(e)},a.state={data:[],nearbyRestaurants:[],userLocation:{lat:19.432608,lng:-99.133209},searchRadius:10,searched:!1},v.a.get("./data/data.json").then((function(e){console.log(e.data),a.setState({data:e.data}),console.log(a.state)})),a.changeSearchRadius=a.changeSearchRadius.bind(Object(m.a)(a)),a.searchRadius=a.searchRadius.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getcurrentLocation();case 2:t=e.sent,a=t.lat,n=t.lng,console.log("lat: "+a),this.setState({userLocation:{lat:a,lng:n}});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getcurrentLocation",value:function(){return navigator&&navigator.geolocation?new Promise((function(e,t){navigator.geolocation.getCurrentPosition((function(t){var a=t.coords;e({lat:a.latitude,lng:a.longitude})}))})):{lat:0,lng:0}}},{key:"changeSearchRadius",value:function(e){this.setState({searchRadius:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state.nearbyRestaurants.map((function(e){var t=e.address.location;return r.a.createElement(S.Marker,{key:e.id,position:t})}));return r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement("div",{className:"searchDiv"},r.a.createElement("div",null,r.a.createElement("h3",null,"Click on the map to add a marker!")),r.a.createElement("div",null,r.a.createElement("p",null,"Search within a radius of: "),r.a.createElement("input",{type:"number",defaultValue:this.state.searchRadius,onChange:this.changeSearchRadius})," meters"),r.a.createElement("div",{className:"searchButtonDiv"},r.a.createElement("button",{onClick:this.searchRadius},"Search"))),r.a.createElement("div",{className:"mapDiv"},r.a.createElement(S.Map,{google:this.props.google,zoom:8,style:{width:"100%",height:"300px"},initialCenter:{lat:this.state.userLocation.lat,lng:this.state.userLocation.lng},onClick:function(t,a,n){e.addMarker(n.latLng,a)}},r.a.createElement(S.Marker,{position:this.state.userLocation,icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png"}),this.state.searched&&t)),this.state.searched&&r.a.createElement("div",{className:"resultsDiv"},r.a.createElement("h5",null,"Reccomended nearby places: ")),this.state.nearbyRestaurants.length>0&&r.a.createElement(N,{data:this.state.nearbyRestaurants}),this.state.nearbyRestaurants.length>0&&r.a.createElement(R,{className:"resultsListDiv",data:this.state.nearbyRestaurants}),this.state.searched&&0===this.state.nearbyRestaurants.length&&r.a.createElement("h3",null,"No results. Try another point."),r.a.createElement(y.a,null))}},{key:"searchRadius",value:function(){console.log(this.state),this.setState({searched:!0});for(var e=this.state.searchRadius,t=this.state.data,a=this.state.userLocation,n=[],r=0;r<t.length;r++){var l=this.distanceBetween(a.lat,a.lng,t[r].address.location.lat,t[r].address.location.lng,"K");console.log(l),console.log("distance between user marker and "+t[r].name+": "+l),t[r].distanceToUser=l,l<=e&&n.push(t[r])}console.log(n),this.setState({nearbyRestaurants:n})}},{key:"distanceBetween",value:function(e,t,a,n,r){if(e===a&&t===n)return 0;var l=Math.PI*e/180,c=Math.PI*a/180,s=t-n,i=Math.PI*s/180,o=Math.sin(l)*Math.sin(c)+Math.cos(l)*Math.cos(c)*Math.cos(i);return o>1&&(o=1),o=60*(o=180*(o=Math.acos(o))/Math.PI)*1.1515,"K"===r&&(o*=1.609344),"N"===r&&(o*=.8684),1e3*o}}]),t}(r.a.Component),w=Object(S.GoogleApiWrapper)({apiKey:"AIzaSyBmX5reXyIC2aYXiVgg7kcoQZN1Be3WxFE"})(D),M=a(13),L=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,null,r.a.createElement(M.c,null,r.a.createElement(M.a,{exact:!0,path:"/",component:j}),r.a.createElement(M.a,{exact:!0,path:"/location",component:w}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.d8d67ba8.chunk.js.map